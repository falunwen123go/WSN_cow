# ğŸš€ WSNç‰›æ£šç›‘æµ‹ç³»ç»Ÿ - è¿è¡ŒæŒ‡å—

> **æ–‡æ¡£ç‰ˆæœ¬**: v2.0  
> **æ›´æ–°æ—¥æœŸ**: 2025-11-19  
> **ç³»ç»ŸçŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª

---

## ğŸ“‹ ç›®å½•

1. [ç¯å¢ƒå‡†å¤‡](#ä¸€ç¯å¢ƒå‡†å¤‡)
2. [æ•°æ®åº“å¯åŠ¨](#äºŒæ•°æ®åº“å¯åŠ¨)
3. [åç«¯å¯åŠ¨](#ä¸‰åç«¯å¯åŠ¨)
4. [å‰ç«¯å¯åŠ¨](#å››å‰ç«¯å¯åŠ¨)
5. [å®Œæ•´å¯åŠ¨é¡ºåº](#äº”å®Œæ•´å¯åŠ¨é¡ºåº)
6. [åŠŸèƒ½éªŒè¯](#å…­åŠŸèƒ½éªŒè¯)
7. [ç³»ç»ŸçŠ¶æ€](#ä¸ƒç³»ç»ŸçŠ¶æ€)
8. [å¸¸è§é—®é¢˜](#å…«å¸¸è§é—®é¢˜)
9. [å¿«é€ŸéªŒè¯è„šæœ¬](#ä¹å¿«é€ŸéªŒè¯è„šæœ¬)

---

## ä¸€ã€ç¯å¢ƒå‡†å¤‡

### å¿…éœ€è½¯ä»¶

| è½¯ä»¶ | ç‰ˆæœ¬è¦æ±‚ | ç”¨é€” | éªŒè¯å‘½ä»¤ |
|-----|---------|------|---------|
| JDK | 21+ | åç«¯è¿è¡Œç¯å¢ƒ | `java -version` |
| Maven | 3.9+ | é¡¹ç›®æ„å»ºå·¥å…· | `mvn -version` |
| MySQL | 8.0+ | æ•°æ®åº“æœåŠ¡ | `mysql --version` |
| Node.js | 18+ LTS | å‰ç«¯è¿è¡Œç¯å¢ƒ | `node -version` |
| npm | 9+ | åŒ…ç®¡ç†å™¨ | `npm -version` |

### ç¯å¢ƒéªŒè¯

```powershell
# ä¸€é”®æ£€æŸ¥æ‰€æœ‰ç¯å¢ƒ
java -version
mvn -version
mysql --version
node -version
npm -version
```

---

## äºŒã€æ•°æ®åº“å¯åŠ¨

### 1. å¯åŠ¨MySQLæœåŠ¡

```powershell
# Windowsç³»ç»Ÿå¯åŠ¨MySQL
net start mysql

# æˆ–é€šè¿‡æœåŠ¡ç®¡ç†å™¨å¯åŠ¨
services.msc  # æ‰¾åˆ°MySQLæœåŠ¡å¹¶å¯åŠ¨
```

### 2. éªŒè¯æ•°æ®åº“

```powershell
# ç™»å½•MySQL
mysql -u root -p

# æŸ¥çœ‹æ•°æ®åº“
mysql> SHOW DATABASES LIKE 'wsn_cow_monitor';
mysql> USE wsn_cow_monitor;
mysql> SHOW TABLES;

# åº”è¯¥çœ‹åˆ°7å¼ è¡¨ï¼š
# +-----------------------------+
# | Tables_in_wsn_cow_monitor   |
# +-----------------------------+
# | alarm_info                  |
# | device_control_log          |
# | device_info                 |
# | node_info                   |
# | sensor_data                 |
# | system_config               |
# | user                        |
# +-----------------------------+
```

### 3. æ•°æ®éªŒè¯

```sql
-- æŸ¥çœ‹ç¤ºä¾‹æ•°æ®
SELECT COUNT(*) FROM sensor_data;      -- åº”è¿”å›30æ¡
SELECT COUNT(*) FROM node_info;        -- åº”è¿”å›3æ¡
SELECT COUNT(*) FROM alarm_info;       -- åº”è¿”å›12æ¡
SELECT COUNT(*) FROM device_info;      -- åº”è¿”å›3æ¡
SELECT COUNT(*) FROM device_control_log; -- åº”è¿”å›5æ¡
```

---

## ä¸‰ã€åç«¯å¯åŠ¨

### æ–¹å¼1ï¼šIDEAè¿è¡Œï¼ˆæ¨èï¼‰

```text
1. åœ¨IDEAä¸­æ‰“å¼€ backend æ–‡ä»¶å¤¹
2. ç­‰å¾…Mavenä¾èµ–ä¸‹è½½å®Œæˆ
3. æ‰¾åˆ° com.wsn.cow.WsnCowApplication.java
4. å³é”® -> Run 'WsnCowApplication'
5. ç­‰å¾…æ§åˆ¶å°è¾“å‡ºï¼šStarted WsnCowApplication in X seconds
```

### æ–¹å¼2ï¼šMavenå‘½ä»¤è¡Œ

```powershell
# è®¾ç½®æ‰§è¡Œç­–ç•¥ï¼ˆæ¯æ¬¡æ–°å¼€ç»ˆç«¯éœ€è¦ï¼‰
Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass

# è¿›å…¥åç«¯ç›®å½•
cd d:\OneDrive\æ¡Œé¢\cursor\WSN_cow\backend

# æ–¹å¼Aï¼šç›´æ¥è¿è¡Œ
mvn spring-boot:run

# æ–¹å¼Bï¼šæ‰“åŒ…åè¿è¡Œ
mvn clean package -DskipTests
java -jar target/cow-monitor-backend-1.0.0.jar
```

### å¯åŠ¨æˆåŠŸæ ‡å¿—

```text
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v2.7.18)

2025-11-19 20:30:45.123  INFO --- [main] c.w.cow.WsnCowApplication: Started WsnCowApplication in 2.456 seconds
```

### éªŒè¯åç«¯è¿è¡Œ

```powershell
# æ–¹å¼1ï¼šæµè§ˆå™¨è®¿é—®
# æ‰“å¼€ http://localhost:9090

# æ–¹å¼2ï¼šPowerShellæµ‹è¯•API
# è·å–èŠ‚ç‚¹åˆ—è¡¨
Invoke-RestMethod http://localhost:9090/api/node/list

# è·å–æœ€æ–°ä¼ æ„Ÿå™¨æ•°æ®
Invoke-RestMethod http://localhost:9090/api/sensor/latest

# è·å–å‘Šè­¦åˆ—è¡¨
(Invoke-WebRequest -Uri "http://localhost:9090/api/alarm/list?pageNum=1&pageSize=10").Content | ConvertFrom-Json | ConvertTo-Json -Depth 3
```

**åç«¯APIæ¸…å•**ï¼ˆ38ä¸ªæ¥å£ï¼‰ï¼š

| æ¨¡å— | æ¥å£æ•° | ç¤ºä¾‹API |
|-----|-------|---------|
| ä¼ æ„Ÿå™¨æ•°æ® | 5 | `/api/sensor/latest`, `/api/sensor/history` |
| èŠ‚ç‚¹ç®¡ç† | 7 | `/api/node/list`, `/api/node/{nodeId}` |
| å‘Šè­¦ç®¡ç† | 7 | `/api/alarm/list`, `/api/alarm/handle/{id}` |
| è®¾å¤‡æ§åˆ¶ | 14 | `/api/device/control`, `/api/device/log` |
| ç³»ç»Ÿé…ç½® | 5 | `/api/config/list`, `/api/config/{key}` |

---

## å››ã€å‰ç«¯å¯åŠ¨

### é¦–æ¬¡å¯åŠ¨

```powershell
# 1. è®¾ç½®PowerShellæ‰§è¡Œç­–ç•¥
Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass

# 2. è¿›å…¥å‰ç«¯ç›®å½•
cd d:\OneDrive\æ¡Œé¢\cursor\WSN_cow\frontend

# 3. å®‰è£…ä¾èµ–ï¼ˆä»…é¦–æ¬¡éœ€è¦ï¼Œçº¦2-3åˆ†é’Ÿï¼‰
npm install

# 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

### åç»­å¯åŠ¨

```powershell
# å·²å®‰è£…è¿‡ä¾èµ–ï¼Œç›´æ¥å¯åŠ¨
cd d:\OneDrive\æ¡Œé¢\cursor\WSN_cow\frontend
Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass
npm run dev
```

### å¯åŠ¨æˆåŠŸæ ‡å¿—

```text
VITE v5.0.10  ready in 1234 ms

  âœ  Local:   http://localhost:5173/
  âœ  Network: use --host to expose
  âœ  press h + enter to show help
```

### å‰ç«¯è®¿é—®

**ä¸»é¡µåœ°å€**: http://localhost:5173/

**åŠŸèƒ½é¡µé¢**ï¼ˆ6ä¸ªï¼‰ï¼š
1. **æ•°æ®ç›‘æ§** (`/`) - å®æ—¶ç›‘æ§å¤§å±ã€ç»Ÿè®¡å¡ç‰‡ã€è¶‹åŠ¿å›¾è¡¨
2. **èŠ‚ç‚¹ç®¡ç†** (`/nodes`) - èŠ‚ç‚¹åˆ—è¡¨ã€çŠ¶æ€ç›‘æ§ã€CRUDæ“ä½œ
3. **æŠ¥è­¦ä¿¡æ¯** (`/alarms`) - å‘Šè­¦åˆ—è¡¨ã€ç­›é€‰ã€å¤„ç†
4. **è®¾å¤‡æ§åˆ¶** (`/devices`) - è®¾å¤‡å¡ç‰‡ã€æ§åˆ¶å¼€å…³ã€æ—¥å¿—æŸ¥è¯¢
5. **å†å²è®°å½•** (`/history`) - æ•°æ®æŸ¥è¯¢ã€å›¾è¡¨å¯è§†åŒ–
6. **ç³»ç»Ÿé…ç½®** (`/settings`) - é˜ˆå€¼é…ç½®ã€ç³»ç»Ÿå‚æ•°

---

## äº”ã€å®Œæ•´å¯åŠ¨é¡ºåº

### æ¨èå¯åŠ¨æµç¨‹

```powershell
# ===== ç»ˆç«¯1ï¼šå¯åŠ¨åç«¯ =====
cd d:\OneDrive\æ¡Œé¢\cursor\WSN_cow\backend
Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass
mvn spring-boot:run

# ç­‰å¾…çœ‹åˆ° "Started WsnCowApplication in X seconds"

# ===== ç»ˆç«¯2ï¼šå¯åŠ¨å‰ç«¯ =====
cd d:\OneDrive\æ¡Œé¢\cursor\WSN_cow\frontend
Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass
npm run dev

# ç­‰å¾…çœ‹åˆ° "Local: http://localhost:5173/"
```

### éªŒè¯å¯åŠ¨æˆåŠŸ

âœ… **åç«¯æ£€æŸ¥**:
- æµè§ˆå™¨è®¿é—® http://localhost:9090 ï¼ˆåº”çœ‹åˆ°Whitelabel Error Pageï¼‰
- æµ‹è¯•API: `Invoke-RestMethod http://localhost:9090/api/node/list`

âœ… **å‰ç«¯æ£€æŸ¥**:
- æµè§ˆå™¨è®¿é—® http://localhost:5173
- åº”çœ‹åˆ°æ•°æ®ç›‘æ§å¤§å±
- ä¾§è¾¹æ å¯ä»¥å¯¼èˆªåˆ°6ä¸ªé¡µé¢

âœ… **æ•°æ®åº“æ£€æŸ¥**:
```sql
-- æŸ¥çœ‹æœ€æ–°æ•°æ®
SELECT * FROM sensor_data ORDER BY collect_time DESC LIMIT 5;
SELECT * FROM alarm_info WHERE handle_status = 0 LIMIT 5;
```

---

## å…­ã€åŠŸèƒ½éªŒè¯

### 1. æ•°æ®ç›‘æ§é¡µé¢

**è®¿é—®**: http://localhost:5173/

**éªŒè¯é¡¹**:
- âœ… æ˜¾ç¤ºæ¸©åº¦ã€æ¹¿åº¦ã€NHâ‚ƒã€Hâ‚‚Så®æ—¶æ•°æ®
- âœ… èŠ‚ç‚¹ç»Ÿè®¡ï¼ˆ3ä¸ªèŠ‚ç‚¹ï¼š0åœ¨çº¿ã€3ç¦»çº¿ï¼‰
- âœ… è®¾å¤‡ç»Ÿè®¡ï¼ˆ3å°è®¾å¤‡ï¼š0è¿è¡Œã€3åœæ­¢ï¼‰
- âœ… æ¸©æ¹¿åº¦è¶‹åŠ¿å›¾æ­£å¸¸æ¸²æŸ“
- âœ… æ°”ä½“æµ“åº¦è¶‹åŠ¿å›¾æ­£å¸¸æ¸²æŸ“
- âœ… æœ€æ–°æŠ¥è­¦åˆ—è¡¨æ˜¾ç¤ºï¼ˆæœ€å¤š10æ¡ï¼‰

**æµ‹è¯•æ•°æ®**:
```javascript
// å½“å‰æ˜¾ç¤ºçš„æ•°æ®
æ¸©åº¦: 23.4Â°C
æ¹¿åº¦: 65.3%
NHâ‚ƒ: 15.5 ppm
Hâ‚‚S: 5.1 ppm
```

### 2. èŠ‚ç‚¹ç®¡ç†é¡µé¢

**è®¿é—®**: http://localhost:5173/nodes

**éªŒè¯é¡¹**:
- âœ… èŠ‚ç‚¹åˆ—è¡¨æ˜¾ç¤º3ä¸ªèŠ‚ç‚¹
- âœ… çŠ¶æ€æ ‡ç­¾ï¼šç¦»çº¿ï¼ˆç°è‰²ï¼‰
- âœ… ç”µæ± ç”µé‡è¿›åº¦æ¡ï¼ˆ85%ã€92%ã€68%ï¼‰
- âœ… ä¿¡å·å¼ºåº¦æ ‡ç­¾ï¼ˆ78dBmã€85dBmã€62dBmï¼‰
- âœ… æ“ä½œæŒ‰é’®ç»„ï¼šè¯¦æƒ…ã€ç¼–è¾‘ã€åˆ é™¤

### 3. æŠ¥è­¦ç®¡ç†é¡µé¢

**è®¿é—®**: http://localhost:5173/alarms

**éªŒè¯é¡¹**:
- âœ… æŠ¥è­¦åˆ—è¡¨åˆ†é¡µæ˜¾ç¤ºï¼ˆ12æ¡ï¼‰
- âœ… æŠ¥è­¦çº§åˆ«å¾½ç« ï¼ˆä¸¥é‡ã€è­¦å‘Šã€ä¸€èˆ¬ï¼‰
- âœ… æŠ¥è­¦ç±»å‹æ ‡ç­¾ï¼ˆæ¸©åº¦ã€æ¹¿åº¦ã€NHâ‚ƒã€Hâ‚‚Sï¼‰
- âœ… å¤„ç†çŠ¶æ€ï¼šå·²å¤„ç†/æœªå¤„ç†
- âœ… ç­›é€‰åŠŸèƒ½ï¼šçº§åˆ«ã€ç±»å‹ã€çŠ¶æ€ã€æ—¶é—´

### 4. è®¾å¤‡æ§åˆ¶é¡µé¢

**è®¿é—®**: http://localhost:5173/devices

**éªŒè¯é¡¹**:
- âœ… è®¾å¤‡å¡ç‰‡æ˜¾ç¤ºï¼ˆé£æœºã€å·å¸˜ã€ä¾›çƒ­ï¼‰
- âœ… è®¾å¤‡çŠ¶æ€ï¼šå·²åœæ­¢ï¼ˆç°è‰²ï¼‰
- âœ… æ§åˆ¶æ¨¡å¼ï¼šæ‰‹åŠ¨/è‡ªåŠ¨
- âœ… æ§åˆ¶å¼€å…³ç»„ä»¶
- âœ… æ§åˆ¶æ—¥å¿—è¡¨æ ¼ï¼ˆ5æ¡è®°å½•ï¼‰
- âœ… ç»Ÿè®¡å¡ç‰‡ï¼š3å°è®¾å¤‡ã€0è¿è¡Œã€0è‡ªåŠ¨ã€0ç¦»çº¿

### 5. å†å²è®°å½•é¡µé¢

**è®¿é—®**: http://localhost:5173/history

**éªŒè¯é¡¹**:
- âœ… èŠ‚ç‚¹é€‰æ‹©ä¸‹æ‹‰æ¡†ï¼ˆ3ä¸ªèŠ‚ç‚¹ï¼‰
- âœ… æ—¶é—´èŒƒå›´é€‰æ‹©å™¨
- âœ… å†å²æ•°æ®è¡¨æ ¼ï¼ˆåˆ†é¡µæ˜¾ç¤ºï¼‰
- âœ… æ•°æ®å›¾è¡¨å¯è§†åŒ–
- âœ… æŸ¥è¯¢å’Œé‡ç½®æŒ‰é’®

### 6. ç³»ç»Ÿé…ç½®é¡µé¢

**è®¿é—®**: http://localhost:5173/settings

**éªŒè¯é¡¹**:
- âœ… é…ç½®åˆ—è¡¨ï¼ˆ10é¡¹é…ç½®ï¼‰
- âœ… é…ç½®è¯¦æƒ…æ˜¾ç¤º
- âœ… ç¼–è¾‘å’Œä¿å­˜åŠŸèƒ½
- âœ… åˆ·æ–°é…ç½®ç¼“å­˜

---

## ä¸ƒã€ç³»ç»ŸçŠ¶æ€

### å½“å‰åŠŸèƒ½å®Œæˆåº¦

| åŠŸèƒ½æ¨¡å— | åç«¯API | å‰ç«¯é¡µé¢ | æ•°æ®å±•ç¤º | çŠ¶æ€ |
|---------|---------|---------|---------|------|
| æ•°æ®ç›‘æ§ | âœ… 5ä¸ª | âœ… å®Œæˆ | âœ… æ­£å¸¸ | âœ… 100% |
| èŠ‚ç‚¹ç®¡ç† | âœ… 7ä¸ª | âœ… å®Œæˆ | âœ… æ­£å¸¸ | âœ… 100% |
| æŠ¥è­¦ç®¡ç† | âœ… 7ä¸ª | âœ… å®Œæˆ | âœ… æ­£å¸¸ | âœ… 100% |
| è®¾å¤‡æ§åˆ¶ | âœ… 14ä¸ª | âœ… å®Œæˆ | âœ… æ­£å¸¸ | âœ… 100% |
| å†å²è®°å½• | âœ… 5ä¸ª | âœ… å®Œæˆ | âœ… æ­£å¸¸ | âœ… 100% |
| ç³»ç»Ÿé…ç½® | âœ… 5ä¸ª | âœ… å®Œæˆ | âœ… æ­£å¸¸ | âœ… 100% |

### æŠ€æœ¯æŒ‡æ ‡

- **åç«¯æœåŠ¡**: Spring Boot 2.7.18ï¼Œç«¯å£9090
- **å‰ç«¯æœåŠ¡**: Vite 5ï¼Œç«¯å£5173
- **æ•°æ®åº“**: MySQL 8.0ï¼Œ7å¼ è¡¨ï¼Œ61æ¡ç¤ºä¾‹æ•°æ®
- **æ¥å£æ€»æ•°**: 38ä¸ªRESTful API
- **é¡µé¢ç»„ä»¶**: 23ä¸ªVueç»„ä»¶ï¼ˆ6ä¸ªé¡µé¢+8ä¸ªå…¬å…±ç»„ä»¶ï¼‰
- **å“åº”æ—¶é—´**: APIå¹³å‡<50msï¼Œé¡µé¢åŠ è½½<1s

---

## å…«ã€å¸¸è§é—®é¢˜

### Q1: åç«¯å¯åŠ¨å¤±è´¥ - ç«¯å£è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯**:
```text
***************************
APPLICATION FAILED TO START
***************************

Description:
Web server failed to start. Port 9090 was already in use.
```

**è§£å†³æ–¹æ¡ˆ**:
```powershell
# 1. æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
netstat -ano | findstr :9090

# 2. è®°ä½PIDï¼Œæ€æ­»è¿›ç¨‹ï¼ˆæ›¿æ¢<PID>ï¼‰
taskkill /F /PID <PID>

# 3. æˆ–ä¿®æ”¹ç«¯å£ï¼ˆç¼–è¾‘application.ymlï¼‰
server:
  port: 9091  # æ”¹ä¸ºå…¶ä»–ç«¯å£
```

### Q2: å‰ç«¯npmå‘½ä»¤æŠ¥é”™

**é”™è¯¯ä¿¡æ¯**:
```text
npm : æ— æ³•åŠ è½½æ–‡ä»¶ C:\xxx\npm.ps1ï¼Œå› ä¸ºåœ¨æ­¤ç³»ç»Ÿä¸Šç¦æ­¢è¿è¡Œè„šæœ¬ã€‚
```

**è§£å†³æ–¹æ¡ˆ**:
```powershell
# æ¯æ¬¡æ–°å¼€PowerShellç»ˆç«¯éƒ½éœ€è¦æ‰§è¡Œ
Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass

# æˆ–è€…æ°¸ä¹…è®¾ç½®ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
Set-ExecutionPolicy -Scope CurrentUser -ExecutionPolicy RemoteSigned
```

### Q3: æ•°æ®åº“è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**:
```text
com.mysql.cj.jdbc.exceptions.CommunicationsException: 
Communications link failure
```

**è§£å†³æ–¹æ¡ˆ**:
```powershell
# 1. æ£€æŸ¥MySQLæœåŠ¡
net start mysql

# 2. éªŒè¯è¿æ¥ä¿¡æ¯
mysql -u root -p
# è¾“å…¥å¯†ç åèƒ½å¦ç™»å½•

# 3. æ£€æŸ¥é…ç½®æ–‡ä»¶ backend/src/main/resources/application.yml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/wsn_cow_monitor
    username: root
    password: ä½ çš„å®é™…å¯†ç   # â† ç¡®ä¿æ­£ç¡®
```

### Q4: å‰ç«¯APIè¯·æ±‚è·¨åŸŸé”™è¯¯

**é”™è¯¯ä¿¡æ¯**:
```text
Access to XMLHttpRequest at 'http://localhost:9090/api/...' 
from origin 'http://localhost:5173' has been blocked by CORS policy
```

**è§£å†³æ–¹æ¡ˆ**:
```text
âœ… æ— éœ€æ‹…å¿ƒï¼šViteå·²é…ç½®proxyä»£ç†
âœ… ç¡®ä¿åç«¯å·²å¯åŠ¨ï¼ˆ9090ç«¯å£ï¼‰
âœ… å‰ç«¯ä¼šè‡ªåŠ¨å°† /api è¯·æ±‚ä»£ç†åˆ°åç«¯

# å¦‚æœé—®é¢˜ä»å­˜åœ¨ï¼Œæ£€æŸ¥ vite.config.ts:
server: {
  proxy: {
    '/api': {
      target: 'http://localhost:9090',
      changeOrigin: true
    }
  }
}
```

### Q5: EChartså›¾è¡¨ä¸æ˜¾ç¤º

**å¯èƒ½åŸå› **:
1. DOMæœªæ¸²æŸ“å®Œæˆ
2. å®¹å™¨å°ºå¯¸ä¸º0
3. æ•°æ®ä¸ºç©º

**è§£å†³æ–¹æ¡ˆ**:
```text
âœ… å·²ä¿®å¤ï¼šä½¿ç”¨nextTick()ç­‰å¾…DOMæ¸²æŸ“
âœ… å·²ä¿®å¤ï¼šæ·»åŠ DOMå°ºå¯¸æ£€æŸ¥
âœ… å·²ä¿®å¤ï¼šä½¿ç”¨å†å²æ•°æ®APIè·å–è¶‹åŠ¿æ•°æ®

åˆ·æ–°æµè§ˆå™¨ï¼ˆCtrl+F5ï¼‰å³å¯çœ‹åˆ°å›¾è¡¨
```

### Q6: npm install å®‰è£…ä¾èµ–å¤±è´¥

**é”™è¯¯ä¿¡æ¯**:
```text
npm ERR! network request to https://registry.npmjs.org/... failed
```

**è§£å†³æ–¹æ¡ˆ**:
```powershell
# åˆ‡æ¢åˆ°å›½å†…é•œåƒ
npm config set registry https://registry.npmmirror.com

# æ¸…é™¤ç¼“å­˜åé‡è¯•
npm cache clean --force
npm install
```

---

## ä¹ã€å¿«é€ŸéªŒè¯è„šæœ¬

### åˆ›å»ºéªŒè¯è„šæœ¬

å°†ä»¥ä¸‹å†…å®¹ä¿å­˜ä¸º `check_system.ps1`:

```powershell
# WSNç³»ç»ŸçŠ¶æ€æ£€æŸ¥è„šæœ¬
Write-Host "`n===== WSNç‰›æ£šç›‘æµ‹ç³»ç»ŸçŠ¶æ€æ£€æŸ¥ =====" -ForegroundColor Cyan
Write-Host "æ£€æŸ¥æ—¶é—´: $(Get-Date -Format 'yyyy-MM-dd HH:mm:ss')" -ForegroundColor Gray

# 1. æ£€æŸ¥åç«¯æœåŠ¡
Write-Host "`n[1/4] æ£€æŸ¥åç«¯æœåŠ¡ (9090ç«¯å£)..." -ForegroundColor Yellow
try {
    $backendResponse = Invoke-RestMethod -Uri "http://localhost:9090/api/node/list" -TimeoutSec 3
    Write-Host "  âœ“ åç«¯æœåŠ¡è¿è¡Œæ­£å¸¸" -ForegroundColor Green
    Write-Host "  â†’ APIå“åº”æ­£å¸¸ï¼Œè¿”å›æ•°æ®: $($backendResponse.data.Count) ä¸ªèŠ‚ç‚¹" -ForegroundColor Gray
} catch {
    Write-Host "  âœ— åç«¯æœåŠ¡æœªå¯åŠ¨æˆ–æ— å“åº”" -ForegroundColor Red
    Write-Host "  â†’ è¯·æ£€æŸ¥: mvn spring-boot:run æ˜¯å¦æ­£åœ¨è¿è¡Œ" -ForegroundColor Gray
}

# 2. æ£€æŸ¥å‰ç«¯æœåŠ¡
Write-Host "`n[2/4] æ£€æŸ¥å‰ç«¯æœåŠ¡ (5173ç«¯å£)..." -ForegroundColor Yellow
try {
    $frontendResponse = Invoke-WebRequest -Uri "http://localhost:5173" -TimeoutSec 3
    Write-Host "  âœ“ å‰ç«¯æœåŠ¡è¿è¡Œæ­£å¸¸" -ForegroundColor Green
    Write-Host "  â†’ é¡µé¢å¯è®¿é—®ï¼ŒçŠ¶æ€ç : $($frontendResponse.StatusCode)" -ForegroundColor Gray
} catch {
    Write-Host "  âœ— å‰ç«¯æœåŠ¡æœªå¯åŠ¨æˆ–æ— å“åº”" -ForegroundColor Red
    Write-Host "  â†’ è¯·æ£€æŸ¥: npm run dev æ˜¯å¦æ­£åœ¨è¿è¡Œ" -ForegroundColor Gray
}

# 3. æ£€æŸ¥MySQLæœåŠ¡
Write-Host "`n[3/4] æ£€æŸ¥MySQLæ•°æ®åº“æœåŠ¡..." -ForegroundColor Yellow
$mysqlService = Get-Service -Name "mysql*" -ErrorAction SilentlyContinue
if ($mysqlService -and $mysqlService.Status -eq "Running") {
    Write-Host "  âœ“ MySQLæœåŠ¡è¿è¡Œä¸­" -ForegroundColor Green
    Write-Host "  â†’ æœåŠ¡å: $($mysqlService.Name)ï¼ŒçŠ¶æ€: $($mysqlService.Status)" -ForegroundColor Gray
} else {
    Write-Host "  âœ— MySQLæœåŠ¡æœªè¿è¡Œ" -ForegroundColor Red
    Write-Host "  â†’ è¯·æ‰§è¡Œ: net start mysql" -ForegroundColor Gray
}

# 4. æµ‹è¯•æ ¸å¿ƒAPI
Write-Host "`n[4/4] æµ‹è¯•æ ¸å¿ƒAPI..." -ForegroundColor Yellow
$apiTests = @(
    @{Name="ä¼ æ„Ÿå™¨æ•°æ®"; URL="http://localhost:9090/api/sensor/latest"},
    @{Name="å‘Šè­¦åˆ—è¡¨"; URL="http://localhost:9090/api/alarm/list?pageNum=1&pageSize=5"},
    @{Name="è®¾å¤‡åˆ—è¡¨"; URL="http://localhost:9090/api/device/list"}
)

$apiPassCount = 0
foreach ($test in $apiTests) {
    try {
        $response = Invoke-RestMethod -Uri $test.URL -TimeoutSec 2
        if ($response.code -eq 200) {
            Write-Host "  âœ“ $($test.Name): æ­£å¸¸" -ForegroundColor Green
            $apiPassCount++
        }
    } catch {
        Write-Host "  âœ— $($test.Name): å¤±è´¥" -ForegroundColor Red
    }
}

Write-Host "  â†’ é€šè¿‡: $apiPassCount/$($apiTests.Count) ä¸ªAPI" -ForegroundColor Gray

# 5. æ€»ç»“
Write-Host "`n===== æ£€æŸ¥å®Œæˆ =====" -ForegroundColor Cyan
Write-Host "ç³»ç»Ÿè®¿é—®åœ°å€:" -ForegroundColor Yellow
Write-Host "  â€¢ å‰ç«¯: http://localhost:5173" -ForegroundColor Cyan
Write-Host "  â€¢ åç«¯: http://localhost:9090" -ForegroundColor Cyan
Write-Host "`nå»ºè®®: å¦‚æœ‰æœåŠ¡æœªå¯åŠ¨ï¼Œè¯·å‚è€ƒã€Šè¿è¡ŒæŒ‡å—.mdã€‹å¯åŠ¨ç›¸åº”æœåŠ¡`n" -ForegroundColor Gray
```

### è¿è¡ŒéªŒè¯è„šæœ¬

```powershell
# å…è®¸è„šæœ¬æ‰§è¡Œ
Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass

# è¿è¡Œæ£€æŸ¥è„šæœ¬
.\check_system.ps1
```

**é¢„æœŸè¾“å‡º**:
```text
===== WSNç‰›æ£šç›‘æµ‹ç³»ç»ŸçŠ¶æ€æ£€æŸ¥ =====
æ£€æŸ¥æ—¶é—´: 2025-11-19 20:30:45

[1/4] æ£€æŸ¥åç«¯æœåŠ¡ (9090ç«¯å£)...
  âœ“ åç«¯æœåŠ¡è¿è¡Œæ­£å¸¸
  â†’ APIå“åº”æ­£å¸¸ï¼Œè¿”å›æ•°æ®: 3 ä¸ªèŠ‚ç‚¹

[2/4] æ£€æŸ¥å‰ç«¯æœåŠ¡ (5173ç«¯å£)...
  âœ“ å‰ç«¯æœåŠ¡è¿è¡Œæ­£å¸¸
  â†’ é¡µé¢å¯è®¿é—®ï¼ŒçŠ¶æ€ç : 200

[3/4] æ£€æŸ¥MySQLæ•°æ®åº“æœåŠ¡...
  âœ“ MySQLæœåŠ¡è¿è¡Œä¸­
  â†’ æœåŠ¡å: MySQL80ï¼ŒçŠ¶æ€: Running

[4/4] æµ‹è¯•æ ¸å¿ƒAPI...
  âœ“ ä¼ æ„Ÿå™¨æ•°æ®: æ­£å¸¸
  âœ“ å‘Šè­¦åˆ—è¡¨: æ­£å¸¸
  âœ“ è®¾å¤‡åˆ—è¡¨: æ­£å¸¸
  â†’ é€šè¿‡: 3/3 ä¸ªAPI

===== æ£€æŸ¥å®Œæˆ =====
ç³»ç»Ÿè®¿é—®åœ°å€:
  â€¢ å‰ç«¯: http://localhost:5173
  â€¢ åç«¯: http://localhost:9090
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [README.md](./README.md) - é¡¹ç›®æ€»è§ˆ
- [åç«¯æ¥å£å®Œæ•´æ–‡æ¡£.md](./åç«¯æ¥å£å®Œæ•´æ–‡æ¡£.md) - 38ä¸ªAPIè¯¦ç»†è¯´æ˜
- [å‰åç«¯å­—æ®µæ˜ å°„æ–‡æ¡£.md](./å‰åç«¯å­—æ®µæ˜ å°„æ–‡æ¡£.md) - æ•°æ®ç»“æ„å¯¹ç…§
- [æ•°æ®åº“çœŸå®ç»“æ„æ–‡æ¡£.md](./database/æ•°æ®åº“çœŸå®ç»“æ„æ–‡æ¡£.md) - æ•°æ®åº“è®¾è®¡

---

**æ€»ç»“**: 
1. å…ˆå¯åŠ¨MySQLæ•°æ®åº“
2. å†å¯åŠ¨åç«¯æœåŠ¡ï¼ˆ9090ç«¯å£ï¼‰
3. æœ€åå¯åŠ¨å‰ç«¯æœåŠ¡ï¼ˆ5173ç«¯å£ï¼‰  
4. è®¿é—® http://localhost:5173 å¼€å§‹ä½¿ç”¨ç³»ç»Ÿ

**å½“å‰ç³»ç»Ÿ**: âœ… æ‰€æœ‰åŠŸèƒ½å·²å®Œæˆï¼Œå¯æ­£å¸¸è¿è¡Œä½¿ç”¨

---

**æ–‡æ¡£ç»´æŠ¤**: 2025-11-19  
**ç³»ç»Ÿç‰ˆæœ¬**: v1.0.0  
**è¿è¡ŒçŠ¶æ€**: ğŸŸ¢ æ­£å¸¸è¿è¡Œ